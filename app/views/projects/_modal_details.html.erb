<div class="modal-overlay hidden" data-modal-target="overlay" data-action="click->modal#closeOnBackdrop">
  <div class="modal-container modal-scale-in" data-modal-target="container">
    <!-- Modal Header -->
    <div class="modal-header">
      <div class="modal-title">
        <span class="text-2xl">üìã</span>
        <span><%= @project.title %></span>
      </div>
      <button class="modal-close" data-action="click->modal#close" aria-label="Close modal">
        <span class="text-xl">‚úï</span>
      </button>
    </div>

    <!-- Modal Body -->
    <div class="modal-body">
      <!-- Project Overview -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
        <!-- Left Column - Basic Info -->
        <div class="space-y-6">
          <!-- Project Status -->
          <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
            <h3 class="text-sm font-semibold text-gray-700 uppercase tracking-wider mb-3">Status</h3>
            <% case @project.status %>
            <% when "pending" %>
              <span class="badge badge-warning badge-lg">‚è≥ Pending</span>
            <% when "processing" %>
              <span class="badge badge-info badge-lg">‚öôÔ∏è Processing</span>
            <% when "completed" %>
              <span class="badge badge-success badge-lg">‚úì Completed</span>
            <% when "failed" %>
              <span class="badge badge-danger badge-lg">‚úó Failed</span>
            <% end %>
          </div>

          <!-- Project Details -->
          <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
            <h3 class="text-sm font-semibold text-gray-700 uppercase tracking-wider mb-3">Project Details</h3>
            <div class="space-y-3">
              <div class="flex justify-between items-center">
                <span class="text-gray-600">Industry:</span>
                <span class="badge badge-primary"><%= @project.industry %></span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-gray-600">Type:</span>
                <span class="badge badge-secondary"><%= @project.project_type.gsub('_', ' ').titleize %></span>
              </div>
              <% if @recommendation&.recommended_team_size.present? %>
                <div class="flex justify-between items-center">
                  <span class="text-gray-600">AI Recommended Team:</span>
                  <span class="badge badge-success"><%= @recommendation.recommended_team_size %> <%= @recommendation.recommended_team_size == 1 ? 'person' : 'people' %></span>
                </div>
              <% end %>
              <% if @recommendation&.estimated_timeline.present? %>
                <div class="flex justify-between items-center">
                  <span class="text-gray-600">Estimated Timeline:</span>
                  <span class="badge badge-info"><%= @recommendation.estimated_timeline %></span>
                </div>
              <% end %>
              <div class="flex justify-between items-center">
                <span class="text-gray-600">Created:</span>
                <span class="text-gray-900"><%= @project.created_at.strftime("%B %d, %Y") %></span>
              </div>
            </div>
          </div>
        </div>

        <!-- Right Column - Description -->
        <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
          <h3 class="text-sm font-semibold text-gray-700 uppercase tracking-wider mb-3">Description</h3>
          <p class="text-gray-700 leading-relaxed"><%= @project.description %></p>
        </div>
      </div>

      <!-- AI Recommendation Section -->
      <% if @project.recommendation %>
        <div class="bg-gray-50 rounded-lg p-6 border border-gray-200">
          <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
            <span class="text-xl">ü§ñ</span>
            AI Technology Recommendations
          </h3>
          
          <!-- Summary -->
          <div class="mb-6">
            <h4 class="text-sm font-semibold text-gray-700 uppercase tracking-wider mb-3">Recommendation Summary</h4>
            <p class="text-gray-700 leading-relaxed mb-4"><%= @project.recommendation.summary %></p>
            
            <!-- Key Metrics in Summary -->
            <div class="grid grid-cols-2 gap-3 mt-4">
              <% if @project.recommendation.recommended_team_size.present? %>
                <div class="bg-green-50 rounded-lg p-3 border border-green-200">
                  <p class="text-xs text-green-700 font-medium mb-1">üë• Team Size</p>
                  <p class="text-lg font-bold text-green-900"><%= @project.recommendation.recommended_team_size %> <%= @project.recommendation.recommended_team_size == 1 ? 'person' : 'people' %></p>
                </div>
              <% end %>
              <% if @project.recommendation.estimated_timeline.present? %>
                <div class="bg-blue-50 rounded-lg p-3 border border-blue-200">
                  <p class="text-xs text-blue-700 font-medium mb-1">‚è±Ô∏è Timeline</p>
                  <p class="text-lg font-bold text-blue-900"><%= @project.recommendation.estimated_timeline %></p>
                  <% if @project.recommendation.complexity_analysis.present? %>
                    <p class="text-xs text-blue-600 mt-1"><%= @project.recommendation.complexity_analysis %></p>
                  <% end %>
                </div>
              <% end %>
            </div>
          </div>

          <!-- Timeline Breakdown -->
          <% if @project.recommendation.timeline_breakdown.present? %>
            <div class="mb-6">
              <h4 class="text-sm font-semibold text-gray-700 uppercase tracking-wider mb-3">üìÖ Timeline Breakdown</h4>
              <div class="grid grid-cols-2 gap-2 mb-4">
                <% @project.recommendation.timeline_breakdown.each do |phase, duration| %>
                  <div class="bg-blue-50 border border-blue-200 rounded-lg p-2">
                    <p class="text-xs text-blue-700 font-medium"><%= phase.humanize %></p>
                    <p class="text-sm font-bold text-blue-900"><%= duration %></p>
                  </div>
                <% end %>
              </div>
              
              <% if @project.recommendation.risk_factors.present? %>
                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3">
                  <p class="text-xs text-yellow-700 font-medium mb-1 flex items-center gap-1">
                    <span>‚ö†Ô∏è</span>
                    <span>Risk Factors</span>
                  </p>
                  <p class="text-xs text-yellow-600"><%= @project.recommendation.risk_factors %></p>
                </div>
              <% end %>
            </div>
          <% end %>

          <!-- Technologies -->
          <% if @project.recommendation.technologies.any? %>
            <div class="mb-6">
              <h4 class="text-sm font-semibold text-gray-700 uppercase tracking-wider mb-3">Recommended Technologies</h4>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                <% @project.recommendation.technologies.each do |tech| %>
                  <div class="bg-white rounded-lg p-3 border border-gray-300">
                    <div class="flex items-center justify-between mb-2">
                      <h5 class="font-semibold text-gray-900"><%= tech.name %></h5>
                      <span class="badge badge-primary badge-sm"><%= tech.category %></span>
                    </div>
                    <p class="text-sm text-gray-600"><%= tech.description %></p>
                  </div>
                <% end %>
              </div>
            </div>
          <% end %>

          <!-- Team Composition -->
          <% if @project.recommendation.team_members.any? %>
            <div>
              <div class="flex items-center justify-between mb-3">
                <h4 class="text-sm font-semibold text-gray-700 uppercase tracking-wider">Recommended Team Composition</h4>
                <% if @project.recommendation.recommended_team_size.present? %>
                  <span class="badge badge-success badge-lg">Total: <%= @project.recommendation.recommended_team_size %> <%= @project.recommendation.recommended_team_size == 1 ? 'person' : 'people' %></span>
                <% end %>
              </div>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                <% @project.recommendation.team_members.each do |member| %>
                  <div class="bg-white rounded-lg p-3 border border-gray-300">
                    <div class="flex items-center justify-between mb-2">
                      <h5 class="font-semibold text-gray-900"><%= member.role %></h5>
                      <span class="badge badge-neutral badge-sm"><%= member.count %> <%= member.count == 1 ? 'person' : 'people' %></span>
                    </div>
                    <% if member.skills.present? %>
                      <p class="text-sm text-gray-600"><strong>Skills:</strong> <%= member.skills %></p>
                    <% end %>
                    <% if member.responsibilities.present? %>
                      <p class="text-sm text-gray-600 mt-1"><strong>Responsibilities:</strong> <%= member.responsibilities %></p>
                    <% end %>
                  </div>
                <% end %>
              </div>
            </div>
          <% end %>
        </div>
      <% else %>
        <div class="bg-gray-50 rounded-lg p-6 text-center border border-gray-200">
          <div class="text-4xl mb-4">ü§ñ</div>
          <h3 class="text-lg font-semibold text-gray-900 mb-2">No AI Recommendations Yet</h3>
          <p class="text-gray-700 mb-4">This project hasn't received AI-powered technology recommendations yet.</p>
          <button type="button" 
                  class="btn btn-primary"
                  data-action="generateRecommendations"
                  data-project-id="<%= @project.id %>">
            Get Recommendation
          </button>
        </div>
      <% end %>
    </div>

    <!-- Modal Footer -->
    <div class="modal-footer">
      <button class="btn btn-ghost" data-action="click->modal#close">Close</button>
    </div>
  </div>
</div>
